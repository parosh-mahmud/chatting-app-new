{"ast":null,"code":"import _regeneratorRuntime from\"E:/chatapp/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/chatapp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/chatapp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{FormControl,VStack,FormLabel,Input,InputGroup,InputRightElement,Button,useToast// Added useToast\n}from'@chakra-ui/react';import axios from'axios';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginPage=function LoginPage(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var toast=useToast();// Initialize useToast\nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var history=useHistory();// Initial\nvar handleClick=function handleClick(){return setShow(!show);};var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var config,_yield$axios$post,data,_error$response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);if(!(!email||!password)){_context.next=6;break;}toast({title:'Please fill in all fields',status:'error',duration:5000,isClosable:true});setLoading(false);return _context.abrupt(\"return\");case 6:config={headers:{'Content-Type':'application/json'}};_context.next=9;return axios.post('/api/user/login',{email:email,password:password},config);case 9:_yield$axios$post=_context.sent;data=_yield$axios$post.data;toast({title:'Login successful',status:'success',duration:5000,isClosable:true});localStorage.setItem(\"userInfo\",JSON.stringify(data));history.push(\"/chats\");// Clear the form fields\nsetEmail('');setPassword('');_context.next=22;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](0);console.error('Login error:',_context.t0);toast({title:'Login failed',description:((_error$response=_context.t0.response)===null||_error$response===void 0?void 0:_error$response.data.message)||'An error occurred during login',status:'error',duration:5000,isClosable:true});case 22:_context.prev=22;setLoading(false);return _context.finish(22);case 25:case\"end\":return _context.stop();}},_callee,null,[[0,18,22,25]]);}));return function submitHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(VStack,{spacing:\"5px\",color:\"black\",children:[/*#__PURE__*/_jsxs(FormControl,{id:\"email\",isRequired:true,children:[/*#__PURE__*/_jsx(FormLabel,{children:\"Email\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"Enter your Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(FormControl,{id:\"password\",isRequired:true,children:[/*#__PURE__*/_jsx(FormLabel,{children:\"Password\"}),/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(Input,{type:show?'text':'password',placeholder:\"Enter your Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(InputRightElement,{width:\"4.5rem\",children:/*#__PURE__*/_jsx(Button,{h:\"1.75rem\",size:\"sm\",onClick:handleClick,children:show?'Hide':'Show'})})]})]}),/*#__PURE__*/_jsx(Button,{colorScheme:\"blue\",width:\"100%\",style:{marginTop:15},onClick:submitHandler,isLoading:loading,children:\"Login\"}),/*#__PURE__*/_jsx(Button,{variant:\"solid\",colorScheme:\"red\",width:\"100%\",onClick:function onClick(){setEmail('guest@example.com');setPassword('123456');},children:\"Get Guest User Credentials\"})]});};export default LoginPage;","map":{"version":3,"names":["React","useState","FormControl","VStack","FormLabel","Input","InputGroup","InputRightElement","Button","useToast","axios","useHistory","jsx","_jsx","jsxs","_jsxs","LoginPage","_useState","_useState2","_slicedToArray","show","setShow","_useState3","_useState4","email","setEmail","_useState5","_useState6","password","setPassword","toast","_useState7","_useState8","loading","setLoading","history","handleClick","submitHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","config","_yield$axios$post","data","_error$response","wrap","_callee$","_context","prev","next","title","status","duration","isClosable","abrupt","headers","post","sent","localStorage","setItem","JSON","stringify","push","t0","console","error","description","response","message","finish","stop","apply","arguments","spacing","color","children","id","isRequired","placeholder","value","onChange","e","target","type","width","h","size","onClick","colorScheme","style","marginTop","isLoading","variant"],"sources":["E:/chatapp/client/src/components/auth/Login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport {\r\n  FormControl,\r\n  VStack,\r\n  FormLabel,\r\n  Input,\r\n  InputGroup,\r\n  InputRightElement,\r\n  Button,\r\n  useToast, // Added useToast\r\n} from '@chakra-ui/react';\r\nimport axios from 'axios';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst LoginPage = () => {\r\n  const [show, setShow] = useState(false);\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const toast = useToast(); // Initialize useToast\r\n  const [loading, setLoading] = useState(false);\r\n  const history = useHistory(); // Initial\r\n\r\n  const handleClick = () => setShow(!show);\r\n\r\n  const submitHandler = async () => {\r\n    try {\r\n      setLoading(true);\r\n      if (!email || !password) {\r\n        toast({\r\n          title: 'Please fill in all fields',\r\n          status: 'error',\r\n          duration: 5000,\r\n          isClosable: true,\r\n        });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const config = {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      };\r\n\r\n      const { data } = await axios.post('/api/user/login', { email, password }, config);\r\n      toast({\r\n        title: 'Login successful',\r\n        \r\n        status:'success',\r\n        duration: 5000,\r\n        isClosable: true,\r\n      });\r\n      localStorage.setItem(\"userInfo\", JSON.stringify(data));\r\n      \r\n      history.push(\"/chats\");\r\n      // Clear the form fields\r\n      setEmail('');\r\n      setPassword('');\r\n    } catch (error) {\r\n      console.error('Login error:', error);\r\n      toast({\r\n        title: 'Login failed',\r\n        description: error.response?.data.message || 'An error occurred during login',\r\n        status: 'error',\r\n        duration: 5000,\r\n        isClosable: true,\r\n      });\r\n      \r\n    }finally{\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <VStack spacing=\"5px\" color=\"black\">\r\n      <FormControl id=\"email\" isRequired>\r\n        <FormLabel>Email</FormLabel>\r\n        <Input\r\n          placeholder=\"Enter your Email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n        />\r\n      </FormControl>\r\n      <FormControl id=\"password\" isRequired>\r\n        <FormLabel>Password</FormLabel>\r\n        <InputGroup>\r\n          <Input\r\n            type={show ? 'text' : 'password'}\r\n            placeholder=\"Enter your Password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n          <InputRightElement width=\"4.5rem\">\r\n            <Button h=\"1.75rem\" size=\"sm\" onClick={handleClick}>\r\n              {show ? 'Hide' : 'Show'}\r\n            </Button>\r\n          </InputRightElement>\r\n        </InputGroup>\r\n      </FormControl>\r\n      <Button\r\n        colorScheme=\"blue\"\r\n        width=\"100%\"\r\n        style={{ marginTop: 15 }}\r\n        onClick={submitHandler}\r\n        isLoading={loading}\r\n      >\r\n        Login\r\n      </Button>\r\n      <Button\r\n        variant=\"solid\"\r\n        colorScheme=\"red\"\r\n        width=\"100%\"\r\n        onClick={() => {\r\n          setEmail('guest@example.com');\r\n          setPassword('123456');\r\n        }}\r\n      >\r\n        Get Guest User Credentials\r\n      </Button>\r\n    </VStack>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}