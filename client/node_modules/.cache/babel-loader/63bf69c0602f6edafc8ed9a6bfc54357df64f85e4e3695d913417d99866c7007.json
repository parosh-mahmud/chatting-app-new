{"ast":null,"code":"import _toConsumableArray from\"E:/chatapp/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"E:/chatapp/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/chatapp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/chatapp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{ChatState}from'../../Context/ChatProvider';import{Flex,FormControl,IconButton,Input,Spinner,Text,useToast}from'@chakra-ui/react';import{ArrowBackIcon}from\"@chakra-ui/icons\";import{getSender,getSenderFull}from'../../config/ChatLogics';import ProfileModal from'./ProfileModal';import UpdateGroupChatModal from'./UpdateGroupChatModal';import axios from'axios';import\"./style.css\";import io from\"socket.io-client\";import ScrollableChat from'./ScrollableChat';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var socket,selectedChatCompare;var ENDPOINT='http://localhost:5000';var SingleChat=function SingleChat(_ref){var fetchAgain=_ref.fetchAgain,setFetchAgain=_ref.setFetchAgain,toggleChatView=_ref.toggleChatView;var _ChatState=ChatState(),selectedChat=_ChatState.selectedChat,setSelectedChat=_ChatState.setSelectedChat,user=_ChatState.user,notification=_ChatState.notification,setNotification=_ChatState.setNotification;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newMessage=_useState6[0],setNewMessage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),socketConnected=_useState8[0],setSocketConnected=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),typing=_useState10[0],setTyping=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),istyping=_useState12[0],setIsTyping=_useState12[1];var toast=useToast();var fetchMessages=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var config,_yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(selectedChat){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.prev=2;config={headers:{Authorization:\"Bearer \".concat(user.token)}};setLoading(true);_context.next=7;return axios.get(\"/api/message/\".concat(selectedChat._id),config);case 7:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setMessages(data);setLoading(false);socket.emit(\"join chat\",selectedChat._id);_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);toast({title:\"Error Occured!\",description:\"Failed to Load the Messages\",status:\"error\",duration:5000,isClosable:true,position:\"bottom\"});case 17:case\"end\":return _context.stop();}},_callee,null,[[2,14]]);}));return function fetchMessages(){return _ref2.apply(this,arguments);};}();var sendMessage=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){var config,_yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!(event.key===\"Enter\"&&newMessage)){_context2.next=16;break;}socket.emit(\"stop typing\",selectedChat._id);_context2.prev=2;config={headers:{\"Content-type\":\"application/json\",Authorization:\"Bearer \".concat(user.token)}};setNewMessage(\"\");_context2.next=7;return axios.post(\"/api/message\",{content:newMessage,chatId:selectedChat},config);case 7:_yield$axios$post=_context2.sent;data=_yield$axios$post.data;socket.emit(\"new message\",data);setMessages([].concat(_toConsumableArray(messages),[data]));_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](2);toast({title:\"Error Occured!\",description:\"Failed to send the Message\",status:\"error\",duration:5000,isClosable:true,position:\"bottom\"});case 16:case\"end\":return _context2.stop();}},_callee2,null,[[2,13]]);}));return function sendMessage(_x){return _ref3.apply(this,arguments);};}();useEffect(function(){socket=io(ENDPOINT);socket.emit(\"setup\",user);socket.on(\"connected\",function(){return setSocketConnected(true);});socket.on(\"typing\",function(){return setIsTyping(true);});socket.on(\"stop typing\",function(){return setIsTyping(false);});// eslint-disable-next-line\n},[]);useEffect(function(){fetchMessages();selectedChatCompare=selectedChat;// eslint-disable-next-line\n},[selectedChat]);useEffect(function(){socket.on(\"message received\",function(newMessageReceived){if(!selectedChatCompare||selectedChatCompare._id!==newMessageReceived.chat._id){if(!notification.includes(newMessageReceived)){setNotification([newMessageReceived].concat(_toConsumableArray(notification)));setFetchAgain(!fetchAgain);}}else{setMessages([].concat(_toConsumableArray(messages),[newMessageReceived]));}});},[selectedChatCompare,messages]);var typingHandler=function typingHandler(e){setNewMessage(e.target.value);if(!typing){setTyping(true);}};return/*#__PURE__*/_jsx(_Fragment,{children:selectedChat?/*#__PURE__*/_jsxs(Flex,{flexDirection:\"column\",alignItems:\"stretch\",h:\"100vh\",w:\"100%\",overflow:\"hidden\",children:[/*#__PURE__*/_jsxs(Flex,{fontSize:{base:\"28px\",md:\"30px\"},pb:3,px:2,w:\"100%\",fontFamily:\"Work sans\",justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(IconButton,{d:{base:\"flex\",md:\"none\"},icon:/*#__PURE__*/_jsx(ArrowBackIcon,{}),onClick:function onClick(){toggleChatView();setSelectedChat(\"\");// Clear selected chat\n}}),/*#__PURE__*/_jsx(Text,{children:selectedChat.isGroupChat?selectedChat.chatName.toUpperCase():getSender(user,selectedChat.users)}),/*#__PURE__*/_jsx(Flex,{alignItems:\"center\",children:selectedChat.isGroupChat?/*#__PURE__*/_jsx(UpdateGroupChatModal,{fetchAgain:fetchAgain,setFetchAgain:setFetchAgain,fetchMessages:fetchMessages}):/*#__PURE__*/_jsx(ProfileModal,{user:getSenderFull(user,selectedChat.users)})})]}),/*#__PURE__*/_jsxs(Flex,{d:\"flex\",flexDir:\"column\",justifyContent:\"flex-end\",p:3,bg:\"#E8E8E8\",w:\"100%\",h:\"450px\",borderRadius:\"lg\",overflowY:\"auto\",children:[loading?/*#__PURE__*/_jsx(Spinner,{size:\"xl\",w:20,h:20,alignSelf:\"center\",margin:\"auto\"}):/*#__PURE__*/_jsx(\"div\",{className:\"messages\",children:/*#__PURE__*/_jsx(ScrollableChat,{messages:messages})}),/*#__PURE__*/_jsx(FormControl,{id:\"message-input\",isRequired:true,mt:3,children:/*#__PURE__*/_jsx(\"div\",{className:\"typing-indicator \".concat(istyping?'active':''),children:/*#__PURE__*/_jsx(Input,{variant:\"filled\",bg:\"#E0E0E0\",placeholder:\"Enter a message..\",value:newMessage,onChange:typingHandler,onKeyDown:function onKeyDown(e){if(e.key==='Enter'){sendMessage(e);}}})})})]})]}):/*#__PURE__*/_jsx(Flex,{d:\"flex\",alignItems:\"center\",justifyContent:\"center\",h:\"100vh\",children:/*#__PURE__*/_jsx(Text,{fontSize:\"3xl\",pb:3,fontFamily:\"Work sans\",children:\"Click on a user to start a new conversation\"})})});};export default SingleChat;","map":{"version":3,"names":["React","useEffect","useState","ChatState","Flex","FormControl","IconButton","Input","Spinner","Text","useToast","ArrowBackIcon","getSender","getSenderFull","ProfileModal","UpdateGroupChatModal","axios","io","ScrollableChat","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","socket","selectedChatCompare","ENDPOINT","SingleChat","_ref","fetchAgain","setFetchAgain","toggleChatView","_ChatState","selectedChat","setSelectedChat","user","notification","setNotification","_useState","_useState2","_slicedToArray","messages","setMessages","_useState3","_useState4","loading","setLoading","_useState5","_useState6","newMessage","setNewMessage","_useState7","_useState8","socketConnected","setSocketConnected","_useState9","_useState10","typing","setTyping","_useState11","_useState12","istyping","setIsTyping","toast","fetchMessages","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","config","_yield$axios$get","data","wrap","_callee$","_context","prev","next","abrupt","headers","Authorization","concat","token","get","_id","sent","emit","t0","title","description","status","duration","isClosable","position","stop","apply","arguments","sendMessage","_ref3","_callee2","event","_yield$axios$post","_callee2$","_context2","key","post","content","chatId","_toConsumableArray","_x","on","newMessageReceived","chat","includes","typingHandler","e","target","value","children","flexDirection","alignItems","h","w","overflow","fontSize","base","md","pb","px","fontFamily","justifyContent","d","icon","onClick","isGroupChat","chatName","toUpperCase","users","flexDir","p","bg","borderRadius","overflowY","size","alignSelf","margin","className","id","isRequired","mt","variant","placeholder","onChange","onKeyDown"],"sources":["E:/chatapp/client/src/components/miscellaneous/SingleChat.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { ChatState } from '../../Context/ChatProvider';\r\nimport { Flex, FormControl, IconButton, Input, Spinner, Text, useToast } from '@chakra-ui/react';\r\nimport { ArrowBackIcon } from \"@chakra-ui/icons\";\r\nimport { getSender, getSenderFull } from '../../config/ChatLogics';\r\nimport ProfileModal from './ProfileModal';\r\nimport UpdateGroupChatModal from './UpdateGroupChatModal';\r\nimport axios from 'axios';\r\nimport \"./style.css\";\r\nimport io from \"socket.io-client\";\r\nimport ScrollableChat from './ScrollableChat';\r\nvar socket, selectedChatCompare;\r\n\r\nconst ENDPOINT = 'http://localhost:5000';\r\n\r\n\r\n\r\n\r\nconst SingleChat = ({ fetchAgain, setFetchAgain,toggleChatView }) => {\r\n  const { selectedChat, setSelectedChat, user, notification, setNotification } = ChatState();\r\n  const [messages, setMessages] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [newMessage, setNewMessage] = useState(\"\");\r\n  const [socketConnected, setSocketConnected] = useState(false);\r\n  const [typing, setTyping] = useState(false);\r\n  const [istyping, setIsTyping] = useState(false);\r\n  const toast = useToast();\r\n   \r\n\r\n\r\n\r\nconst fetchMessages = async () => {\r\n    if (!selectedChat) return;\r\n\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          Authorization: `Bearer ${user.token}`,\r\n        },\r\n      };\r\n\r\n      setLoading(true);\r\n\r\n      const { data } = await axios.get(\r\n        `/api/message/${selectedChat._id}`,\r\n        config\r\n      );\r\n      setMessages(data);\r\n      setLoading(false);\r\n\r\n      socket.emit(\"join chat\", selectedChat._id);\r\n    } catch (error) {\r\n      toast({\r\n        title: \"Error Occured!\",\r\n        description: \"Failed to Load the Messages\",\r\n        status: \"error\",\r\n        duration: 5000,\r\n        isClosable: true,\r\n        position: \"bottom\",\r\n      });\r\n    }\r\n  };\r\n  \r\n\r\n\r\n\r\nconst sendMessage = async (event) => {\r\n    if (event.key === \"Enter\" && newMessage) {\r\n      socket.emit(\"stop typing\", selectedChat._id);\r\n      try {\r\n        const config = {\r\n          headers: {\r\n            \"Content-type\": \"application/json\",\r\n            Authorization: `Bearer ${user.token}`,\r\n          },\r\n        };\r\n        setNewMessage(\"\");\r\n        const { data } = await axios.post(\r\n          \"/api/message\",\r\n          {\r\n            content: newMessage,\r\n            chatId: selectedChat,\r\n          },\r\n          config\r\n        );\r\n        socket.emit(\"new message\", data);\r\n        setMessages([...messages, data]);\r\n      } catch (error) {\r\n        toast({\r\n          title: \"Error Occured!\",\r\n          description: \"Failed to send the Message\",\r\n          status: \"error\",\r\n          duration: 5000,\r\n          isClosable: true,\r\n          position: \"bottom\",\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n\r\nuseEffect(() => {\r\n    socket = io(ENDPOINT);\r\n    socket.emit(\"setup\", user);\r\n    socket.on(\"connected\", () => setSocketConnected(true));\r\n    socket.on(\"typing\", () => setIsTyping(true));\r\n    socket.on(\"stop typing\", () => setIsTyping(false));\r\n\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchMessages();\r\n\r\n    selectedChatCompare = selectedChat;\r\n    // eslint-disable-next-line\r\n  }, [selectedChat]);\r\n\r\n\r\n\r\n useEffect(() => {\r\n  socket.on(\"message received\", (newMessageReceived) => {\r\n    if (!selectedChatCompare || selectedChatCompare._id !== newMessageReceived.chat._id) {\r\n      \r\n      if(!notification.includes(newMessageReceived)){\r\n        setNotification([newMessageReceived, ...notification]);\r\n        setFetchAgain(!fetchAgain)\r\n      }\r\n\r\n    } else {\r\n      setMessages([...messages, newMessageReceived]);\r\n    }\r\n  });\r\n}, [selectedChatCompare, messages]);\r\n\r\n\r\n\r\n\r\n  const typingHandler = (e) => {\r\n\r\n  \r\n    setNewMessage(e.target.value);\r\n\r\n    \r\n\r\n    if (!typing) {\r\n      setTyping(true);\r\n      \r\n    }\r\n  };\r\n  \r\n\r\n  return (\r\n    <>\r\n      {selectedChat ? (\r\n        <Flex\r\n          flexDirection=\"column\"\r\n          alignItems=\"stretch\"\r\n          h=\"100vh\"\r\n          w=\"100%\"\r\n          overflow=\"hidden\"\r\n        >\r\n         \r\n\r\n          <Flex\r\n            fontSize={{ base: \"28px\", md: \"30px\" }}\r\n            pb={3}\r\n            px={2}\r\n            w=\"100%\"\r\n            fontFamily=\"Work sans\"\r\n            justifyContent=\"space-between\"\r\n            alignItems=\"center\"\r\n          >\r\n          <IconButton\r\n        d={{ base: \"flex\", md: \"none\" }}\r\n        icon={<ArrowBackIcon />}\r\n        onClick={() => {\r\n          toggleChatView();\r\n          setSelectedChat(\"\"); // Clear selected chat\r\n        }}\r\n      />\r\n            <Text>\r\n              {selectedChat.isGroupChat\r\n                ? selectedChat.chatName.toUpperCase()\r\n                : getSender(user, selectedChat.users)}\r\n            </Text>\r\n\r\n            <Flex alignItems=\"center\">\r\n              {/* Conditional rendering based on selectedChat type */}\r\n              {selectedChat.isGroupChat ? (\r\n                <UpdateGroupChatModal\r\n                  fetchAgain={fetchAgain}\r\n                  setFetchAgain={setFetchAgain}\r\n                  fetchMessages={fetchMessages}\r\n                />\r\n              ) : (\r\n                <ProfileModal user={getSenderFull(user, selectedChat.users)} />\r\n              )}\r\n            </Flex>\r\n          </Flex>\r\n\r\n          <Flex\r\n  d=\"flex\"\r\n  flexDir=\"column\"\r\n  justifyContent=\"flex-end\"\r\n  p={3}\r\n  bg=\"#E8E8E8\"\r\n  w=\"100%\"\r\n  h=\"450px\"\r\n  borderRadius=\"lg\"\r\n  overflowY=\"auto\"\r\n>\r\n  {loading ? (\r\n    <Spinner\r\n      size=\"xl\"\r\n      w={20}\r\n      h={20}\r\n      alignSelf=\"center\"\r\n      margin=\"auto\"\r\n    />\r\n  ) : (\r\n    <div className=\"messages\">\r\n      {/* Render the messages here */}\r\n      <ScrollableChat messages={messages} />\r\n    </div>\r\n  )}\r\n\r\n  <FormControl id=\"message-input\" isRequired mt={3}>\r\n    <div className={`typing-indicator ${istyping ? 'active' : ''}`}>\r\n      <Input\r\n        variant=\"filled\"\r\n        bg=\"#E0E0E0\"\r\n        placeholder=\"Enter a message..\"\r\n        value={newMessage}\r\n        onChange={typingHandler}\r\n        onKeyDown={(e) => {\r\n          if (e.key === 'Enter') {\r\n            sendMessage(e);\r\n          }\r\n        }}\r\n      />\r\n    </div>\r\n  </FormControl>\r\n</Flex>\r\n\r\n        </Flex>\r\n      ) : (\r\n        <Flex\r\n          d=\"flex\"\r\n          alignItems=\"center\"\r\n          justifyContent=\"center\"\r\n          h=\"100vh\"\r\n        >\r\n          <Text fontSize=\"3xl\" pb={3} fontFamily=\"Work sans\">\r\n            Click on a user to start a new conversation\r\n          </Text>\r\n        </Flex>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SingleChat;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}